TARGETNAME=ndisip
TARGETPATH=obj
TARGETTYPE=DRIVER

USE_MAPSYM=1

TARGETLIBS=$(DDK_LIB_PATH)\ndis.lib

C_DEFINES=$(C_DEFINES) -DNDIS_MINIPORT_DRIVER -DNDIS40 -DNDIS40_MINIPORT
C_DEFINES=$(C_DEFINES) -DBINARY_COMPATIBLE=1 
!if "$(BUILD_PRODUCT)" == "MILLENNIUM"
C_DEFINES= $(C_DEFINES) -DWIN9X
!endif 


# Why not the default of 0x20? (dgoll)
#DRIVER_ALIGNMENT=0x200

INCLUDES=..\inc

SOURCES=MAIN.C     \
        NDISAPI.C  \
        DEVICE.C   \
        FRAME.C    \
        MEM.C      \
        ADAPTER.C  \
        NDISIP.RC

!ifdef BUILD_SOFTICE_SYMBOLS
CFLAGS=/Zd /Zi

LINKER_FLAGS=$(LINKER_FLAGS) -map -debugtype:map 

TARGETPATHEX=$(TARGETPATH)\$(TARGET_DIRECTORY)
NTTARGETFILES=$(TARGETPATHEX)\$(TARGETNAME).nms

#   .nms must be built before .dbg because splitsym removes symbols from target.
NTTARGETFILES= $(TARGETPATHEX)\$(TARGETNAME).nms $(NTTARGETFILES)
!endif
